---
title: "統合 Windows 認証"
linkTitle: ""
weight: 09
type: "docs"
---
統合Windows認証を使用すれば、ユーザは、ホストにログオンしてユーザ名とパスワードを再入力する必要なく GO-Globalホストに接続しセッションを開始できます。統合Windows認証のみが認証オプションとして有効となっている場合、ユーザ名とパスワードがネットワークを通じて転送されることはありません。GO-Globalは、GO-Globalクライアントと同じセキュリティコンテキストでユーザのセッションを実行します。ユーザはサーバのINTERACTIVEグループではなく、NETWORKグループに追加されます。そのため、いくつかのリソースに対してはアクセスが拒否される場合があります。

統合Windows認証を使用してGO-Globalホストに接続すると、ホストに対話的にログオンした場合とほとんど同じリソースにアクセスできます。しかし、クライアントおよびホストのオペレーティングシステムやネットワークがサポートしている認証プロトコルによっては、ユーザがネットワーク上の他のコンピュータ内にあるリソースにアクセスすると、ユーザ名とパスワードの再入力を求められる場合があります。ネットワークリソースがユーザ名とパスワードを要求できないものである場合は、アクセスは拒否される場合があります。

ネットワーク上の他のコンピューターにアクセスするには、認証資格情報を他のコンピューターに渡すことができるようにActive Directoryを構成する必要があります。マイクロソフトでは、認証資格情報を3つ以上のコンピューターに "委任"として渡す権利を示しています。委任は、Active Directoryネットワークで適切な設定でサポートされています。Active Directoryドメインコントローラを正しく設定する手順については、Microsoft Windowsオペレーティングシステムのマニュアルを参照してください。詳細については、第7章の **[委任サポートの構成要件](/docs/go-globalrc61/advancedtopics/configurationrequirementsfordelegationsupport/)** を参照してください。

{{% alert title="参照" color="info" %}}
**[サーバサイドのパスワードキャッシュ]** オプションを有効にすると、統合Windows認証を使用した場合でもINTERACTIVEグループメンバとしてログオンできます。
{{% /alert %}}

統合Windows認証は、GO-Globalホストと同じドメインのメンバであるWindowsコンピュータからサインインするユーザと、GO-Globalホストの信頼されるドメインのメンバであるWindowsコンピュータからサインインするユーザが利用できます。

### 統合Windows認証を有効にする方法

1. [Tools | Host Options]の順にクリックします。
2. **[Security]** タブをクリックします。
3. [Integrated Windows authentication]を有効にします。
4. **[OK]** をクリックします。

GO-Globalでは、標準認証または統合Windows認証のいずれかが有効になっている必要があります。これらの認証方式のいずれも選択されていない状態で **[OK]** をクリックしダイアログを閉じると、次のエラーメッセージが表示されます。

![4-7-1](/img/4-7-1.png) 

標準認証と統合Windows認証が両方とも有効になっている場合、GO-Globalホストはまず統合Windows認証によってユーザのログオンを試みます。これに失敗した場合は、 **[Sign In]** ダイアログを表示してユーザ名とパスワードの入力を求め、標準認証でユーザのログオンを試みます。

# ホストでのパスワードキャッシュ

ユーザが標準の認証でGO-Globalホストにサインインすると( **[Sign In]** ダイアログ、パラメータ、またはコマンドライン引数で指定されたユーザー名とパスワードのどちらかを使用)、そのユーザはホストのINTERACTIVEグループに追加されます。一方、統合Windows認証を使用してGO-Globalホストにサインインしたユーザは、サーバのNETWORKグループに追加されます。デフォルトでは、INTERACTIVEグループのメンバは、NETWORKグループのメンバより多くのホストのリソースにアクセスできます。このため、統合Windows認証を使用してログオンしたユーザの場合、さまざまな条件により「アクセス拒否」エラーが発生することがあります。

{{% alert title="参照" color="info" %}}
NETWORKグループのメンバがアクセスを制限されている分野には、DCOM(別名OLEおよびCOM/COM+)のセキュリティ制限、ファイルのセキュリティ制限、アプリケーション固有のセキュリティ確認があります。システム管理者は、統合Windows認証でログオンしたユーザがアクセスする必要のあるすべてのリソース(ファイル、サービスなど)が、そのアクセスを許可するよう正しく設定されているか確認してください。
{{% /alert %}}

システム管理者は、 **[ホストにパスワードをキャッシュする]** オプションを有効にして、これらのエラーを回避することができます。そうすることで、ユーザは接続するたびにユーザ名とパスワードを入力しなくても、完全なINTERACTIVEアクセス権でサインインできます。ユーザは、最初にホストに接続したとき、またはパスワードの変更後にパスワードの入力を求められます。パスワードは暗号化され、それぞれのプロファイルに保存されています。その後GO-Globalに接続すると、ユーザは自動的にサインインしてホストのINTERACTIVEグループに追加されます。コンソールでホストにサインインした場合と同じアクセス権が付与されます。

GO-Globalは、ホストに保存されている512ビットキーを使用してRSAアルゴリズムを使用してパスワードを暗号化します。暗号化キーは、`%ALLUSERSPROFILE%\GraphOn\AppController\ks\ks.dat`ファイルに格納されています。このファイルを読み取ることができるのは、ホストのAdministratorsグループおよびSYSTEMアカウントのメンバだけです。

### ホストでパスワードキャッシュを有効にする方法

1. Admin Consoleで、[Tools]メニューから[Tools | Host Options]の順にクリックします。
2. [Security]タブをクリックします。
3. **[Integrated Windows authentication]** を有効にします。
4. **[Cache passwords on the host]** を有効にします。
5. **OK** をクリックします。

{{% alert title="参照" color="info" %}}
移動プロファイルが使用されるGO-Globalホストのクラスタでは、1つのホストからのキーファイルをクラスタ内のすべてのホストにコピーする必要があります。
{{% /alert %}}

![4-7-2](/img/4-7-2.png) 

# クライアントでのパスワードキャッシュ

クライアント側のパスワードキャッシュにより、GO-Globalホストのドメインのメンバではないユーザは、サーバに接続するたびにユーザ名とパスワードを入力する必要なしにGO-Globalにサインインすることができます。**[Cache passwords on the client]** が有効になっていると、**[Sign In]** ダイアログに **[Remember me on this computer]** チェックボックスが表示されます。ユーザがこれを有効にした場合、最初の手動認証の後、ユーザのログオン資格情報はホスト上で暗号化され、ネットワーク経由で送信され、ユーザのプライベートディレクトリのクライアントコンピュータに保存されます。

ユーザがその後サーバに接続すると、キャッシュされたパスワードがホストに送信され、そこで復号化されます。**[Sign In]** ダイアログに、ユーザ名とパスワード、**[Remember me on this computer]** チェックボックスをオンにした状態で表示されます。ユーザが **[Remember me on this computer]** オプションを無効にすると、ユーザの資格情報はクライアントコンピュータから削除されます。

GO-Globalは、ホストに格納されている512ビットキーを使用してRSAアルゴリズムを使用して、クライアントにパスワードをキャッシュします。暗号化キーは、`%ALLUSERSPROFILE%\GraphOn\AppController\ks\ks.dat`ファイルに格納されています。このファイルを読み取ることができるのは、サーバのAdministratorsグループおよびSYSTEMアカウントのメンバだけです。

{{% alert title="参照" color="info" %}}
GO-Globalホストのクラスタでは、1つのホストからのキーファイルをクラスタ内のすべてのホストにコピーする必要があります。
{{% /alert %}}

### クライアントサイドのパスワードキャッシュを有効にする方法

1. Admin Consoleで、[Tools | Server Options]の順にクリックします。
2. **[Security]** タブをクリックします。
3. [Standard authentication(prompt user for user name and password)]を有効にします。
4. [Cache passwords on the client]を有効にします。
5. **[OK]** をクリックします。

ほとんどのプラットフォームにおいて、パスワードのキャッシュは、ユーザのホームディレクトリにあるGO-Globalホストの名前の付いた .datファイルに保存されます。下記の表は、各GO-Globalクライアントにおけるパスワードのキャッシュの保存先の例を示します。例では、user1はユーザ名、hostname.domain.comはGO-Globalホストのアドレスです。

| Platform | Password Locations                             |
|----------|------------------------------------------------|
| Mac OS X | /Users/user1/.AppController/hostname.domain.com.dat   |
| Windows  | \Users\user1\AppData\Roaming\GraphOn\AppController|
| Linux    | /home/user1/.AppController/hostname.domain.com.dat    |

クライアントサイドのパスワードキャッシュはすべてのGO-Globalクライアントでサポートされています。

