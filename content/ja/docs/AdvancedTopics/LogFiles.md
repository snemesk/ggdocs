---
title: "Logファイル"
linkTitle: ""
weight: 17
type: "docs"
---

GO-Globalホストはログファイルを作成して、GO-Global自身および一定のGO-Globalプロセスのパフォーマンス情報を記録します。GraphOn Technical Supportは、このデータを使用して、起こり得る問題の診断と修正を行います。特に、特定のマシンや特定のアプリケーションでのみ再発し得るエラーに対して有効です。

全てのログファイルは、クライアントマシン関連でもホストマシン関連でも、GO-Globalホスト上のLog フォルダ(例:`D:\Program Files\GraphOn\GO-Global\Log`)に保存されます。Logフォルダには、 **Backup**、 **Codes**、 **Templates** の3つのサブフォルダがあります。これらのサブフォルダを削除しないよう注意してください。GO-Globalのメッセージは、接頭語 aps の後にApplication Publishing Serviceが開始された日付と時刻(ミリ秒未満は四捨五入)が続く形でログファイルに記録されます(例: aps_2013-04-04_09-55-47-636.html)。Application Publishing Serviceが開始されるたびに、新しいログファイルが作成されます。最新の日時スタンプのログファイルに、現行または最後の Application Publishing Serviceインスタンスでのメッセージが含まれています。

GO-Globalの実行時に検出された問題は、ログファイルのエントリとして記述されています。各エントリは、項目番号と日時スタンプによって固有識別された、イベントやプログラムエラーの説明です。 GraphOn Technical Supportは、この情報を利用して、障害の原因を判断し解決策を決定します。

また、ログファイルのエントリにはメッセージ識別用の接頭語がついています。それにより、関連する個別ユーザのセッションやアプリケーションが判断できます。イベントが特定セッションのコンテキスト内で発生した場合、そのセッション名がメッセージの最初に表示されます(例:SuzyG on Server1)。イベントがApplication Publishing Serviceへの接続(クライアントまたはアプリケーションからの接続)のコンテキスト内で発生した場合、その接続プロセスの名称(例: pw(1244))がメッセージの接頭語に含まれます。この例(pw(1244))の場合、Program Windowプロセスと Application Publishing Service間の接続中に障害が発生しています。1244は、そのイベントが発生したプロセスのIDです。メッセージの最初に接続名apsが含まれている場合、そのイベントは Application Publishing Service で発生していますが、他のプロセスとの接続には関係ありません。

{{% alert title="情報" color="green" %}}
本項目の設定は以下の技術ノートを参照ください。<br>

* KGTN 2019112701<br>
* KGTN 2019112702<br>
* KGTN 2019112703<br>
* KGTN 2019112705<br>
* KGTN 2019112704<br>
{{% /alert %}}

# Logファイルの新規保存場所の選択

デフォルトでは、Logファイルは生成されると`\Program Files\GraphOn\GO-Global\Log` に保存されます。Admin Consoleの **{Host Options]** ダイアログを使用すれば、Logファイルの新規保存場所を選択できます。

### Logファイルの新規保存場所を選択する方法

1. Admin Consoleで、[Tools | Hosts Options]の順にクリックします。
2. **[Log]** をクリックします。
3. **[Folder]** 編集ボックスに新しいディレクトリへのパスを入力するか、その保存場所を閲覧します。

Logファイルの保存場所としてリモートシステムのパスを指定することはできません。すなわち、UNCパスやマップされたネットワークドライブを[Folder]ボックスで指定すると、**"Please specify a usable Windows folder where log files may be written."** というエラーメッセージが表示されます。

{{% alert title="参照" color="info" %}}
**Backup**フォルダと既存のLogファイルを、 **Templates**および **Codes**サブフォルダと一緒に新規保存場所に移動してください。
{{% /alert %}}

# 出力レベルの設定

GO-Globalには、以下の 6 つのLog出力レベルがあります。

```
0:出力なし 
1:エラー 
2:エラーおよびイベント 
3:エラー、イベント、および警告 
4:エラー、イベント、警告、および診断メッセージ 
5, 6:エラー、イベント、警告、診断メッセージ、およびトレースメッセージ
```

### 出力レベルの設定方法

1. Admin Consoleで、[Tools | Hosts Options]の順にクリックします。
2. **[Log]** をクリックします。
3. **[Output level]** ボックスに上記の数値の 1 つを入力します。
4. **[OK]** をクリックします。

{{% alert title="参照" color="info" %}}
Logの出力レベルを5または6に設定した場合、ホストで生成されるLogファイルの容量は非常に大きくなるため、パフォーマンスや拡張性に悪影響が出る場合があります。したがって、GraphOn社や代理店から特別な指示がない限り、Logの出力レベルを5または6に設定すべきではありません。
{{% /alert %}}

デフォルトの出力レベルは4です。

# Logファイルの管理

GO-Globalでは、Application Publishing Serviceが開始されるたびに **Log** フォルダに新しいLogファイルが作成されます。時間の経過とともに、これらのファイルのサイズは大きくなり、大量のディスクスペースを占領するようになります。これらのファイルの管理のために、GO-Globalでは、Logファイルの削除またはバックアップ、ファイルサイズや保存期間の上限の設定ができます。

### Logファイルの削除方法

1. Admin Consoleで、[Tools | Hosts Options]の順にクリックします。
2. **[Log]** をクリックします。
3. **[Maintenance]** のところで **[Delete]** を選択します。
4. 削除するまでのLogファイルの保存期間を指定します(日単位)。
5. Logファイルのサイズがどのくらいに達したら削除するか指定します(MB 単位)。
6. **[OK]** をクリックします。
7. Go-Global Application Publishing Serviceを再起動します。

### Logファイルのバックアップ方法

1. Admin Consoleで、[Tools | Hosts Options]の順にクリックします。
2. **[Log]** をクリックします。
3. [Maintenance]のところで [Back up]を選択します。
4. どのくらいの時間が経過したらログファイルをLogフォルダのBackupサブディレクトリに移動するか指定します (日単位)。
5. ログファイルがどのくらいの容量に達したらLogフォルダのBackupサブディレクトリに移動するか指定します(MB 単位)。
6. **[OK]** をクリックします。
7. GO-Global Application Publishing Serviceを再起動します。

Application Publishing Serviceは30分ごと、および開始されるたびに、 **Log**フォルダ から指定した保存期間またはサイズに達したファイルを探し出します。その後、それらのファイルを削除するか、Logフォルダ内の **Backup**サブディレクトリに移動します。ログファイルの整理中に、現行のログファイルが指定の保存期間またはサイズに達したら、Application Publishing Serviceはそのログファイルを閉じて、新規作成したログファイルをインストールします。

デフォルトでは、ログファイルは 7日間経過したら、またはサイズが20 MBに達したらバックアップが取られるようになっています。

# クライアントLogファイル

GO-Globalクライアントは、クライアントがホストに接続されていない時に、クライアントデバイス上のLogファイルに情報を記録します。さらに、ユーザがホストにサインインした後、クライアントはLogファイルをホストと同期させます。具体的には、GO-Globalは、ホストに以前にコピーされていないLogファイルがクライアントに存在するかどうかを判断します。存在する場合、GO-Globalは欠落しているクライアントLogファイルをホストにコピーします。

これらの変更により、システム管理者は接続の問題の原因を簡単に特定できます。 たとえば、ユーザがホストへの接続が頻繁に切断されると報告してきた場合、システム管理者はホストとクライアントのLogファイルをチェックして原因を特定できます。 通常、このシナリオでは、ユーザの前のセッションのクライアントLogファイルがホスト上で使用可能になり、管理者はクライアントLogファイルをクライアントデバイスから手動で取得する必要はありません。 一般的に、管理者は、ユーザがホストにまったく接続できない場合にユーザのコンピュータからLogファイルを取得する必要があります。

クライアントLogファイルの名前には、ユーザの名前、ホストのアドレス、クライアントが開始された日時が含まれます。クライアントLogファイルは、ユーザの`%APPDATA%\GraphOn\Logs`ディレクトリ(Windowsクライアントの場合)およびホストの`\ProgramFiles\GraphOn\AppController\Log\Clients`ディレクトリに格納されます。Logファイルがクライアントからホストにコピーされると、クライアントのLogファイルのコピーがクライアントコンピュータの`%APPDATA%\GraphOn\Logs\Old`ディレクトリに移動されます。Logファイルは、`HKEY_CURRENT_USER\Software\GraphOn\AppController\Client\LogFileAgeLimit`レジストリ値で指定された日数の間、クライアントに保存されます。デフォルトは10日間です。

クライアントがホストに接続している間にクライアントが出力する情報は、ホストの(APS__...)ログファイルに記録されます。GO-Globalクライアントは、クライアントがホストに接続されていない場合にのみ、クライアントLogファイルにメッセージを記録します。

# 接続の監視

GO-Globalは、ホストへの接続の待ち時間と入出力速度を監視します。新しいクライアントがホストに接続すると、ホストはクライアントの接続をテストし、各メトリックの初期値をホストのログファイルに記録します。その後、ホストは品質の変化について接続を監視します。セッションの実行中にいずれかのメトリックの品質が変化した場合、ホストはその変化をログファイルに記録します。

品質チェックの頻度としきい値は、**HostProperties.xml** ファイルで指定します。

