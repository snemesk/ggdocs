---
title: "セッションの再接続"
linkTitle: ""
weight: 10
type: "docs"
---

セッション再接続により、クライアント接続がなくてもGO-Globalホスト上のセッションが維持されます。ユーザが意図的にホストから切断、またはクライアント接続がネットワーク障害によって切断された場合にも、そのユーザのセッションとアプリケーションは、Admin Consoleで指定されたセッションタイムアウトの期間中GO-Globalホスト上で稼働し続けます。セッションの再接続により、ユーザは前回切断した時点と全く同じ状態でGO-Globalセッションへ戻ることができます。ユーザは、GO-Globalを終了する代わりに、Program Windowで切断し、その後、切断した時と全く同じ状態でセッションに戻ることが可能です。この時、開いているアプリケーションや実行中のプロセスをシャットダウンする必要はありません｡

ネットワークへの接続が切断されたり、ユーザがGO-Globalから偶発的に切断してしまった場合、そのユーザのセッションの状態は、Admin Consoleで指定された期間中維持されます。GO-Globalでは、ユーザを通常のログオン手順で認証した後、そのユーザがアクティブなセッションを持っているか確認します。セッションがあれば、そのセッションは切断前と全く同じ状態で再開され表示されます。セッションがなければ、新しいセッションが開始されます。またユーザは、セッションを特定のクライアントから切断し、別のクライアントから再接続することもできます。

切断されたセッションへ再接続する場合、ユーザは各自のログオン資格情報の提示を要求されます。ホストは資格情報を検証した後、切断されたセッションに再接続します。セッションがロードバランス構成に含まれているホスト上にある場合、そのセッションがロードバランスサーバ上にあることを意識することなく、ユーザは各自のセッションへルーティングされます。統合Windows認証が有効な場合、ユーザは自動的に再認証され、各自のセッションに再接続されます。

## セッション終了オプションの設定

システム管理者は、クライアントのセッションやアプリケーションが GO-Globalホスト上で実行される期間を、Admin Consoleの **[Host Options]** ダイアログで制御できます。クライアントの切断後、直ちにセッションを終了する場合は、 **[Immediately]** を選択します。これがデフォルトの設定です。ユーザがセッション内で稼働するすべてのアプリケーションを手動で閉じた時、またはシステム管理者がAdmin Consoleを使用して手動でセッションを終了した時にのみセッションを終了する場合は、 **[Never]** を選択します。クライアントがセッションから切断後、そのセッションの稼働を維持する期間を分単位で指定する場合は、 **[After __ minutes]** を選択します。クライアントの切断後にセッションの稼働を維持する期間を分単位の値で編集フィールド内に入力します。

Admin Consoleの **[Sessions]** タブには、特定のセッションに接続しているクライアントの数が表示されます。切断済みのセッションでは、接続クライアント数は0です。

### セッション終了オプションの設定方法

1. Admin Consoleで、[Tools |  Host Options]の順にクリックします。
2. **[Session Shutdown]** タブをクリックします。
3. **[Disconnected sessions terminate]** を有効にします。
4. 以下のセッション終了オプションから1つ選択します。

```
Immediately Never After _ minutes
```

編集ボックスに、クライアントとの切断後もセッションを継続する分数を入力します。<br>
5. **[OK]** をクリックします。

![4-11-1](/img/4-11-1.png) 

## セッションの切断

セッションが終了しないように、または指定した時間が経過しても終了するように設定されている場合は、Program Windowの[File]メニューに **[Disconnect]** オプションが表示されます。セッションがすぐに終了するように設定されている場合、[Disconnect]オプションはProgram Windowの[File]メニューに表示されません。

### セッションの切断方法

Program Windowで、[ File | Disconnect ]の順にクリックします。

セッションの終了を **[Never]** に設定している場合、GO-Globalからの切断時に以下のメッセージがユーザに提示されます。

![4-11-2](/img/4-11-2.png) 

指定した時間(たとえば20分)後にセッションが終了するように設定されている場合、GO-Globalから切断すると、次のようなメッセージがユーザに表示されます。

![4-11-3](/img/4-11-3.png) 

ユーザがセッションを切断する際に、すでに切断済みのセッションがある場合、以下のメッセージが表示されます。<br>
**You already have a session (session_name) that is disconnected. If you disconnect the current session, that previous session will be terminated. Do you want to continue?** <br>
(すでに切断済みのセッション(セッション名)があります。現行のセッションを切断すると、その前回のセッションは終了されます。操作を継続しますか?) <br>

ユーザが **[Yes]** をクリックすると、切断済みのセッションは終了されます。 **[No]** の場合、ユーザは実行中のセッションに戻ります。

{{% alert title="参照" color="info" %}}
ユーザーがセッションに再接続すると、コマンドライン引数-a、-r、および-acは無視されます。
{{% /alert %}}

## 共有アカウント

共有アカウントは、GO-Globalセッションを開始するために複数のユーザが同じアカウントを使用しているときに指定する必要があります。共有アカウントでGO-Globalにサインインしたユーザは、切断してからGO-Globalに再接続することはできません。これにより、ユーザは他のユーザのセッションに再接続できなくなります。

共有アカウントでGO-Globalホストにログオンすると、Admin Consoleの **Disconnected sessions terminate** オプションは無視され、動作は **HostProperties.xml** ファイルの **SessionTimeoutBrokenConnection** プロパティによって決まります(HostProperties.xmlは、`C:\ProgramData\GraphOn`にあります)。

このプロパティの値が0に設定されている場合、セッションはただちに終了します。値が0より大きい場合、セッションは中断され、指定された分数の間サーバ上で実行されたままになります。後者の場合、セッションを開始したユーザだけが中断されたセッションに再接続できます。デフォルトでは、 **SessionTimeoutBrokenConnection** は0分に設定されています。

### 共有アカウントの指定方法

1. [Tools | Host Options]の順にクリックします。
2. **[Session Shutdown]** タブをクリックします。
3. **[Shared account]** 編集ボックスに共有アカウントのユーザ名を入力します。複数の共有アカウントが必要な場合は、アカウントのユーザ名をセミコロンで区切ります。
4. **[OK]** をクリックします。

そのユーザが自分のセッションから切断されている間に管理者が既存のユーザ名を共有アカウントとして指定した場合、そのセッションは終了制限に達するまでサーバ上で実行されたままになります。その後セッションは終了します。共有アカウントを指定する前に、そのアカウントを使用して接続または切断されたセッションがないことをAdmin Consoleで確認してください。

GO-Globalは、共有アカウントに対するドメイン名(NORTH\johngなど)の使用をサポートしていません。

![4-11-4](/img/4-11-4.png)