---
title: "パフォーマンスの自動調整"
linkTitle: ""
weight: 28
type: "docs"
---
パフォーマンスの自動調整は、アプリケーションが大量のグラフィックデータを生成しているとき、またはクライアントシステムの処理速度が制限されているときに使用されます。 パフォーマンス自動調整が有効になっていると、クライアントマシンはホストが送信しているデータを処理している速度を報告します。ホストはこの情報を使用して、クライアントシステムが対応できないグラフィック情報(フレームレートの高いアニメーションなど)を削除したり、プリミティブなグラフィカル操作ではなく、アプリケーションのコンテンツのイメージを送信することを選択したりして、送信するデータの総量を減らします。

パフォーマンスの自動調整により、どのクライアントでも最もグラフィックスの厳しいアプリケーションでも実行できます。 パフォーマンスの自動調整は、デフォルトでは無効になっています。

### ホストに接続しているすべてのクライアントに対してパフォーマンス自動調整を有効にする方法

1. 次のディレクトリで **HostProperties.xml** ファイルを見つけます。`C:\ProgramData\GraphOn\GO-Global`
2. ワードパッドで **HostProperties.xml** を開き、次のセクションを見つけます。
3. **ClientProcessingBatch** 値を0から1に変更します。
4. **ClientProcessingThrottleV2** 値を0から1に変更します。
5. Regeditを開き、DWORDレジストリ値を作成します。`\HKEY_LOCAL_MACHINE\SOFTWARE\GraphOn\GOGlobal\AppServer\ClientOffscreenSurfaces`そしてその値を0に設定します。
6. **GO-Global Application Publishing Service** を停止して開始します。

{{% alert title="参照" color="info" %}}
変更を加える前に、必ず **HostProperties.xml** のバックアップを作成してください。
{{% /alert %}}

### パフォーマンス自動調整のしくみ

パフォーマンス自動調整が無効になっていると、ホストは「四角形を描く」、「線を描く」、「テキストを描く」などの基本的な描画コマンドをクライアントに送信して、クライアントの表示を更新します。

代替方法は、ホストが描画操作の最終結果を含むイメージを待機してクライアントに送信することです。このアプローチは「スクリーンスクレイピング」と呼ばれます。ほとんどの場合、プリミティブ描画コマンドを使用してクライアントの表示を更新する方がはるかに効率的ですが、「スクリーンスクレイピング」のほうが効率的な場合があります。

パフォーマンス自動調整が有効になっていると、ホストは、ディスプレイデータがホストからクライアントに送信されるたびに、クライアントディスプレイを更新する最も効率的な方法を決定しようとします。たとえば、ホストが画面の変更された領域の画像を送信するのに必要な帯域幅が、画面を変更するのに使用されたすべての描画コマンドを送信するのに必要な帯域幅よりも小さいと推定した場合、描画コマンドの代わりにホストは画像を送信します。言い換えれば、それが「スクリーンスクレープ」になります。

アニメーションやビデオを表示するアプリケーションでは、パフォーマンス自動調整を有効にすることをお勧めします。ホスト上のアプリケーションが大量の画像を描画している場合でも、ホストがフレームをスキップしてユーザ入力に応答できるからです。ただし、このオプションを有効にすると、画面の一部がホストのフレームバッファ(画面)から更新され、その他の部分が描画コマンドを使用して更新されたときに、小さな表示異常が発生する可能性があります。これらの異常のため、パフォーマンス自動調整はデフォルトで無効になっています。